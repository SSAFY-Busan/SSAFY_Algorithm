N, M = map(int, input().split())

graph = [list(map(int, input().split())) for _ in range(N)]

tetris_case = [
    # 일자형
    [[0, 0], [0, 1], [0, 2], [0, 3]],
    [[0, 0], [1, 0], [2, 0], [3, 0]],
    # 정사각형
    [[0, 0], [0, 1], [1, 0], [1, 1]],
    # ㄱ자 모형
    [[0, 0], [1, 0], [2, 0], [2, 1]],
    [[0, 0], [1, 0], [0, 1], [0, 2]],
    [[0, 0], [0, 1], [1, 1], [2, 1]],
    [[0, 0], [0, 1], [0, 2], [-1, 2]],
    [[0, 0], [0, 1], [-1, 1], [-2, 1]],
    [[0, 0], [1, 0], [1, 1], [1, 2]],
    [[0, 0], [0, 1], [1, 0], [2, 0]],
    [[0, 0], [0, 1], [0, 2], [1, 2]],
    # 이상한모형
    [[0, 0], [1, 0], [1, 1], [2, 1]],
    [[0, 0], [0, 1], [-1, 1], [-1, 2]],
    [[0, 0], [0, 1], [-1, 1], [1, 0]],
    [[0, 0], [0, 1], [1, 1], [1, 2]],
    # ㅜ자형
    [[0, 0], [0, 1], [0, 2], [1, 1]],
    [[0, 0], [-1, 1], [0, 1], [1, 1]],
    [[0, 0], [0, 1], [0, 2], [-1, 1]],
    [[0, 0], [1, 0], [2, 0], [1, 1]]
]

max_value = 0

for i in range(N):
    for j in range(M):
        # 19개 케이스
        for k in range(19):
            _sum = 0
            for l in range(4):
                try:
                    _sum += graph[i + tetris_case[k][l][0]][j+ tetris_case[k][l][1]]
                # 인덱스 방지
                except:
                    break

            if _sum > max_value:
                max_value = _sum

print(max_value)
